<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/alex-next/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/alex-next/images/favicon.ico?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/alex-next/images/favicon.ico?v=7.4.0">
  <link rel="mask-icon" href="/alex-next/images/logo.svg?v=7.4.0" color="#222">
  <link rel="alternate" href="/alex-next/atom.xml" title="alex的博客 - github.com" type="application/atom+xml">

<link rel="stylesheet" href="/alex-next/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/alex-next/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/alex-next/',
    scheme: 'Pisces',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: true,
    pangu: true,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":5,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="项目gitee地址  https://gitee.com/alexander1/spring-mvc-notes 一、SpringMVC入门 springMVC的搭建过程：1.导入jar2.在web.xml中配置springMVC的核心控制器DispatcherServlet作用：加载springMVC的配置文件3.创建一个POJO，在此类上加@Controller4.在控制层中，在方法上设置@R">
<meta name="keywords" content="SpringMVC">
<meta property="og:type" content="article">
<meta property="og:title" content="springMVC笔记">
<meta property="og:url" content="https://alexander-wd.github.io/2020/07/27/java后端/SpringMVC/index.html">
<meta property="og:site_name" content="alex的博客 - github.com">
<meta property="og:description" content="项目gitee地址  https://gitee.com/alexander1/spring-mvc-notes 一、SpringMVC入门 springMVC的搭建过程：1.导入jar2.在web.xml中配置springMVC的核心控制器DispatcherServlet作用：加载springMVC的配置文件3.创建一个POJO，在此类上加@Controller4.在控制层中，在方法上设置@R">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2021-04-27T06:42:06.795Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="springMVC笔记">
<meta name="twitter:description" content="项目gitee地址  https://gitee.com/alexander1/spring-mvc-notes 一、SpringMVC入门 springMVC的搭建过程：1.导入jar2.在web.xml中配置springMVC的核心控制器DispatcherServlet作用：加载springMVC的配置文件3.创建一个POJO，在此类上加@Controller4.在控制层中，在方法上设置@R">
  <link rel="canonical" href="https://alexander-wd.github.io/2020/07/27/java后端/SpringMVC/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>springMVC笔记 | alex的博客 - github.com</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/alex-next/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">alex的博客 - github.com</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/alex-next/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/alex-next/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/alex-next/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/alex-next/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/alexander-wd" class="github-corner" title="alex GitHub" aria-label="alex GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="https://alexander-wd.github.io/alex-next/2020/07/27/java后端/SpringMVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="alex">
      <meta itemprop="description" content="时光静好,与君语;细水流年,与君同;繁华落尽,与君老.">
      <meta itemprop="image" content="/alex-next/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="alex的博客 - github.com">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">springMVC笔记

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2020-07-27 15:12:45" itemprop="dateCreated datePublished" datetime="2020-07-27T15:12:45+08:00">2020-07-27</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-04-27 14:42:06" itemprop="dateModified" datetime="2021-04-27T14:42:06+08:00">2021-04-27</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/alex-next/categories/JavaEE/" itemprop="url" rel="index"><span itemprop="name">JavaEE</span></a></span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>项目gitee地址</p>
<blockquote>
<p><a href="https://gitee.com/alexander1/spring-mvc-notes" target="_blank" rel="noopener">https://gitee.com/alexander1/spring-mvc-notes</a></p>
<h1 id="一、SpringMVC入门"><a href="#一、SpringMVC入门" class="headerlink" title="一、SpringMVC入门"></a>一、SpringMVC入门</h1></blockquote>
<p>springMVC的搭建过程：<br>1.导入jar<br>2.在web.xml中配置springMVC的核心控制器DispatcherServlet<br>作用：加载springMVC的配置文件<br>3.创建一个POJO，在此类上加@Controller<br>4.在控制层中，在方法上设置@RequestMapping</p>
<h2 id="1、导入jar"><a href="#1、导入jar" class="headerlink" title="1、导入jar"></a>1、导入jar</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2、在web-xml中配置springMVC的核心控制器DispatcherServlet"><a href="#2、在web-xml中配置springMVC的核心控制器DispatcherServlet" class="headerlink" title="2、在web.xml中配置springMVC的核心控制器DispatcherServlet"></a>2、在web.xml中配置springMVC的核心控制器DispatcherServlet</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/表示拦截除*.jsp之外的请求，静态资源也会拦截，也就不会进入spring的DispatcherServlet类。</span><br><span class="line">/*表示拦截所有请求</span><br></pre></td></tr></table></figure>
<h2 id="3、配置视图解析器-扫描"><a href="#3、配置视图解析器-扫描" class="headerlink" title="3、配置视图解析器+扫描"></a>3、配置视图解析器+扫描</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.springmvc.test"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="二、RequestMapping"><a href="#二、RequestMapping" class="headerlink" title="二、RequestMapping"></a>二、RequestMapping</h1><h2 id="1、-RequestParam"><a href="#1、-RequestParam" class="headerlink" title="1、@RequestParam"></a>1、@RequestParam</h2><p>@RequestParam:</p>
<ul>
<li>value:当不满足赋值条件是，可以试用value属性，指定映射关系</li>
<li>required:设置形参是否必须被赋值，默认为true,必须赋值，若设置为false,则不必须赋值，因此形参的值为null</li>
<li>defaultValue:若形参所获得的值为null,则设置一个默认值</li>
</ul>
<h2 id="2、-RequestHeader"><a href="#2、-RequestHeader" class="headerlink" title="2、@RequestHeader"></a>2、@RequestHeader</h2><p>在处理请求的方法上，获取请求头信息，用法和@RequestParam用法一致</p>
<h2 id="3、-PathVariable"><a href="#3、-PathVariable" class="headerlink" title="3、@PathVariable"></a>3、@PathVariable</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 以前：localhost:8080/testRest?id=1001&amp;username=admin</span></span><br><span class="line"><span class="comment">     * 现在：localhost:8080/testRest/1001/admin</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@PathVariable</span> 用来获取路径中占位符的值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testRest/&#123;id&#125;/&#123;username&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRest</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>Integer id,@<span class="title">PathVariable</span><span class="params">(<span class="string">"username"</span>)</span>String username)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"id:"</span>+id+<span class="string">",username:"</span>+username);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="三、RESTFUL风格"><a href="#三、RESTFUL风格" class="headerlink" title="三、RESTFUL风格"></a>三、RESTFUL风格</h1><p>RESTFUL：</p>
<ul>
<li>method：用来设置请求方式，只有客户端发送请求的方式和method的值一直，才能处理请求</li>
<li>请求方式：GET 查询 POST 添加 PUT 修改 DELETE 删除</li>
<li>params:用来设置客户端传到服务器的数据</li>
<li>headers:用来设置请求头信息,所发送的请求头信息一定要和headers属性一致</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    配置Restful风格的过滤器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--过滤所有请求--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="前台"><a href="#前台" class="headerlink" title="前台"></a>前台</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"testREST/1001"</span>&gt;</span>测试GET<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"testREST"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"测试POST"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"testREST"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"PUT"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"测试PUT"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"testREST"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">name</span>=<span class="string">"_method"</span> <span class="attr">value</span>=<span class="string">"DELETE"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"测试DELETE"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"测试AJAX"</span> <span class="attr">onclick</span>=<span class="string">"test()"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">            url:<span class="string">"testAjax_DELETE"</span>,</span></span><br><span class="line"><span class="actionscript">            type:<span class="string">"DELETE"</span>,</span></span><br><span class="line">            data:&#123;</span><br><span class="line">                id:1001</span><br><span class="line">            &#125;,</span><br><span class="line"><span class="actionscript">            dataType:<span class="string">"json"</span>,<span class="comment">//预期服务器返回结果类型</span></span></span><br><span class="line"><span class="actionscript">            success:<span class="function"><span class="keyword">function</span> <span class="params">(obj)</span> </span>&#123;</span></span><br><span class="line">                alert(obj)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="后台"><a href="#后台" class="headerlink" title="后台"></a>后台</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/testREST/&#123;id&#125;"</span>,method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"GET,id="</span>+id);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/testREST"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">insertUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"POST"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 如果想跳到success.jsp</span></span><br><span class="line"><span class="comment">     * 解决办法：</span></span><br><span class="line"><span class="comment">     * 1.加入 <span class="doctag">@ResponseBody</span> 注解。</span></span><br><span class="line"><span class="comment">     * 2.请求先转给一个Controller,再返回jsp页面。</span></span><br><span class="line"><span class="comment">     * 3.tomcat换到7.0以及以下版本。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/testREST"</span>,method = RequestMethod.PUT)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">updateUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"PUT...."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/testREST"</span>,method = RequestMethod.DELETE)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"DELETE...."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"testAjax_DELETE"</span>,method = RequestMethod.DELETE)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAjax_DELETE</span><span class="params">(Integer id)</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"id="</span>+id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="增删改查"><a href="#增删改查" class="headerlink" title="增删改查"></a>增删改查</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">增加：点击增加超链接按钮，通过GET请求方式到服务器，用请求转发的方式跳转到相应的增加页面，</span><br><span class="line">增加完成后通过POST请求方式到服务器，用重定向的方式跳转的list展示页面</span><br><span class="line"></span><br><span class="line">修改：点击修改超链接按钮，通过GET请求方式到服务器，用请求转发的方式跳转到相应的修改页面</span><br><span class="line">并传给修改页面修改之前的实体类信息，</span><br><span class="line">修改完成后通过PUT请求方式到服务器，用重定向的方式跳转的list展示页面</span><br><span class="line"></span><br><span class="line">删除：通过点击超链接按钮，为form表单赋值，并提交表单</span><br><span class="line">$(function()&#123;</span><br><span class="line">    $(<span class="string">".del"</span>).click(function()&#123;</span><br><span class="line">        <span class="keyword">if</span>(confirm(<span class="string">'确认删除吗'</span>))&#123;</span><br><span class="line">            $(<span class="string">'form'</span>).attr(<span class="string">'action'</span>,<span class="keyword">this</span>.href).submit()</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//注意！！！:return false会将超链接的默认行为取消</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">通过DELETE方式请求，并重定向的方式跳转的list展示页面</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">对post请求来说</span><br><span class="line">条件：</span><br><span class="line">1.POST（后台）</span><br><span class="line">2.参数_method（前台）</span><br><span class="line">若不符合条件：-》POST</span><br><span class="line">如符合条件：经过转换之后，真正的请求方式，就是_method的值</span><br></pre></td></tr></table></figure>
<h1 id="四、往作用域中放值"><a href="#四、往作用域中放值" class="headerlink" title="四、往作用域中放值"></a>四、往作用域中放值</h1><h2 id="1、map"><a href="#1、map" class="headerlink" title="1、map"></a>1、map</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/param"</span>,method = RequestMethod.POST)</span><br><span class="line">    <span class="comment">//DispatcherServlet会调用此函数，并为HttpServletRequest赋值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">param</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>&#123;</span><br><span class="line">        map.put(<span class="string">"username"</span>,<span class="string">"admin"</span>);<span class="comment">//向request作用域中放值</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、Model"><a href="#2、Model" class="headerlink" title="2、Model"></a>2、Model</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/param"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="comment">//DispatcherServlet会调用此函数，并为HttpServletRequest赋值</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">param</span><span class="params">(Model model,String name,HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    System.out.println(request.getContextPath());</span><br><span class="line">    model.addAttribute(<span class="string">"name"</span>,name);<span class="comment">//向request作用域中放值</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3、ModelAndView"><a href="#3、ModelAndView" class="headerlink" title="3、ModelAndView"></a>3、ModelAndView</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/param"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="comment">//DispatcherServlet会调用此函数，并为HttpServletRequest赋值</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">param</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">    ModelAndView mav = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    <span class="comment">//在request中放值</span></span><br><span class="line">    mav.addObject(<span class="string">"username"</span>,<span class="string">"root"</span>);</span><br><span class="line">    mav.setViewName(<span class="string">"success"</span>);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>==<strong>三种方式实现作用域放值,其实底层实现都差不多,最终都会封装成ModelAndView，并且通过ViewResolver视图解析器处理</strong>==</p>
<h1 id="五、静态资源处理"><a href="#五、静态资源处理" class="headerlink" title="五、静态资源处理"></a>五、静态资源处理</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    先交给自己配置的DispatcherServlet处理请求，</span></span><br><span class="line"><span class="comment">    当DispatcherServlet没有相应的处理器，就交给tomcat的DefaultServlet处理</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>在springMVC-servlet.xml中配置<mvc:default-servlet-handler>后，会在Spring MVC上下文中定义一个org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler，==它会对进入DispatcherServlet的URL进行筛查，如果发现是静态资源的请求，就将该请求转由Web应用服务器默认的Servlet处理，如果不是静态资源的请求，才由DispatcherServlet继续处理。==</mvc:default-servlet-handler></p>
<p>不过有几点需要注意：</p>
<p>1.一般Web应用服务器默认的Servlet名称是”default”，因此DefaultServletHttpRequestHandler可以找到它。如果你所有的Web应用服务器的默认Servlet名称不是”default”，则需要通过该标签的default-servlet-name属性显示指定。</p>
<p>2.配置该标签以后，@RequestMapping会失效，所以非静态资源请求就不能映射到相应的方法，所以需要加<mvc:annotation-driven></mvc:annotation-driven></p>
<h1 id="六、设置编码过滤器"><a href="#六、设置编码过滤器" class="headerlink" title="六、设置编码过滤器"></a>六、设置编码过滤器</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    配置编码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="七、上传与下载"><a href="#七、上传与下载" class="headerlink" title="七、上传与下载"></a>七、上传与下载</h1><h2 id="1、下载"><a href="#1、下载" class="headerlink" title="1、下载"></a>1、下载</h2><h3 id="①、ResponseEntity-不常用"><a href="#①、ResponseEntity-不常用" class="headerlink" title="①、ResponseEntity(不常用)"></a>①、ResponseEntity(不常用)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/down"</span>)</span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; down(HttpSession session) <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取下载文件的路径,从服务器上下载图片,要找到图片在服务器中的真实位置</span></span><br><span class="line">    String realPath = session.getServletContext().getRealPath(<span class="string">"img"</span>);</span><br><span class="line">    String finalPath = realPath + File.separator+<span class="string">"0.jpg"</span>;</span><br><span class="line">    InputStream is = <span class="keyword">new</span> FileInputStream(finalPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//available():获取输入流所读取的文件的最大字节数</span></span><br><span class="line">    <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[is.available()];</span><br><span class="line">    is.read(b);</span><br><span class="line">    <span class="comment">//请求头</span></span><br><span class="line">    HttpHeaders headers = <span class="keyword">new</span> HttpHeaders();</span><br><span class="line">    headers.add(<span class="string">"Content-Disposition"</span>,<span class="string">"attachment;filename=a.jpg"</span>);</span><br><span class="line">    HttpStatus status =  HttpStatus.OK;</span><br><span class="line">    ResponseEntity&lt;<span class="keyword">byte</span>[]&gt; entity = <span class="keyword">new</span> ResponseEntity&lt;&gt;(b,headers,status);</span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> entity;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="②、IOUtils下载单个文件"><a href="#②、IOUtils下载单个文件" class="headerlink" title="②、IOUtils下载单个文件"></a>②、IOUtils下载单个文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>FileUpload.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> alex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 下载单个文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 14:49 2020/8/5</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [minioClient, bucketname, singleFile, request, response]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">downLoadSingleFile</span><span class="params">(MinioClient minioClient, String bucketname, String singleFile, HttpServletRequest request, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        String userAgent = request.getHeader(<span class="string">"User-Agent"</span>);</span><br><span class="line">        String filename_c = singleFile;</span><br><span class="line">        <span class="keyword">if</span> ( <span class="comment">// IE 8 至 IE 10</span></span><br><span class="line">            userAgent.toUpperCase().contains(<span class="string">"MSIE"</span>) ||</span><br><span class="line">            <span class="comment">// IE 11</span></span><br><span class="line">            userAgent.contains(<span class="string">"Trident/7.0"</span>)) &#123;</span><br><span class="line">            filename_c = java.net.URLEncoder.encode(singleFile, <span class="string">"UTF-8"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            filename_c = <span class="keyword">new</span> String(singleFile.getBytes(<span class="string">"UTF-8"</span>), <span class="string">"iso-8859-1"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        filename_c = filename_c.replace(<span class="string">","</span>,<span class="string">"_"</span>);</span><br><span class="line"></span><br><span class="line">        InputStream inputStream = minioClient.getObject(bucketname, singleFile);</span><br><span class="line">        response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;filename="</span> + filename_c);</span><br><span class="line">        response.setContentType(<span class="string">"application/octet-stream"</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">        IOUtils.copy(inputStream, response.getOutputStream());</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Description</span>(<span class="string">"文件下载"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/downfile"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downloadFile</span><span class="params">(Integer id, String singleFile)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    MinioClient minioClient = <span class="keyword">new</span> MinioClient(url, user, password);</span><br><span class="line">    <span class="keyword">if</span> (id != <span class="keyword">null</span>) &#123;<span class="comment">// 单个文件</span></span><br><span class="line">        FileUpload.downLoadSingleFile(minioClient, bucketname, singleFile, request, response);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">// 多个文件</span></span><br><span class="line">        List&lt;InputStream&gt; isList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String filename : fileNames) &#123;</span><br><span class="line">            InputStream inputStream = minioClient.getObject(bucketname, filename);</span><br><span class="line">            isList.add(inputStream);</span><br><span class="line">        &#125;</span><br><span class="line">        FileUpload.downloadZipFiles(response, isList, fileNames, <span class="string">"package.zip"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下载单个文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadFile</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line">	  <span class="keyword">const</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">"iframe"</span>);</span><br><span class="line">	  iframe.style.display = <span class="string">"none"</span>; <span class="comment">// 防止影响页面</span></span><br><span class="line">	  iframe.style.height = <span class="number">0</span>; <span class="comment">// 防止影响页面</span></span><br><span class="line">	  iframe.src = url; </span><br><span class="line">	<span class="comment">// 这一行必须，iframe挂在到dom树上才会发请求</span></span><br><span class="line">	  <span class="built_in">document</span>.body.appendChild(iframe); </span><br><span class="line">	  <span class="comment">// 5分钟之后删除</span></span><br><span class="line">	  setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">	    iframe.remove();</span><br><span class="line">	  &#125;, <span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载多个文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dload</span>(<span class="params">id</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> rows = $(<span class="string">"#table"</span>).bootstrapTable(<span class="string">"getSelections"</span>); <span class="comment">// 获得要下载的文件</span></span><br><span class="line">	<span class="keyword">if</span>(id!==<span class="literal">undefined</span>)&#123;<span class="comment">//下载单个文件</span></span><br><span class="line">		<span class="keyword">var</span> data = $(<span class="string">"#table"</span>).bootstrapTable(<span class="string">'getRowByUniqueId'</span>,id);</span><br><span class="line">		rows = data</span><br><span class="line">		downloadFile(<span class="string">"/file/downfile?id="</span>+rows.id+<span class="string">"&amp;singleFile="</span>+rows.filename)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">let</span> listFileNames = <span class="string">""</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; rows.length; i++)&#123;</span><br><span class="line">		listFileNames = listFileNames+rows[i].filename+<span class="string">","</span></span><br><span class="line">	&#125;</span><br><span class="line">	$.ajax(&#123;</span><br><span class="line">		url:<span class="string">'/file/listFileNames'</span>,<span class="comment">//为了防止get方式参数大小溢出，所以用ajax另外处理listFileNames</span></span><br><span class="line">		data:&#123;</span><br><span class="line">			<span class="string">"listFileNames"</span>:listFileNames</span><br><span class="line">		&#125;,</span><br><span class="line">		type : <span class="string">"post"</span>,</span><br><span class="line">		dataType:<span class="string">'json'</span>,</span><br><span class="line">		success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(data)</span><br><span class="line">			<span class="keyword">var</span> curWwwPath=<span class="built_in">window</span>.document.location.href;</span><br><span class="line">			<span class="keyword">var</span> pathName=<span class="built_in">window</span>.document.location.pathname;</span><br><span class="line">			<span class="keyword">var</span> pos=curWwwPath.indexOf(pathName);</span><br><span class="line">			<span class="keyword">var</span> localhostPath=curWwwPath.substring(<span class="number">0</span>,pos);</span><br><span class="line">			<span class="keyword">var</span> path =localhostPath +<span class="string">"/file/downfile"</span>;</span><br><span class="line">			<span class="built_in">window</span>.open(path);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="③、使用ZipOutputStream批量下载-zip"><a href="#③、使用ZipOutputStream批量下载-zip" class="headerlink" title="③、使用ZipOutputStream批量下载(zip)"></a>③、使用ZipOutputStream批量下载(zip)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> alex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span> 把文件打成压缩包并输出到客户端浏览器中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 14:43 2020/8/4</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [response, srcFiles, zipFileName]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">downloadZipFiles</span><span class="params">(HttpServletResponse response, List&lt;InputStream&gt; isList,String[] fileNames, String zipFileName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        response.reset(); <span class="comment">// 重点突出</span></span><br><span class="line">        response.setCharacterEncoding(<span class="string">"UTF-8"</span>); <span class="comment">// 重点突出</span></span><br><span class="line">        response.setContentType(<span class="string">"application/x-msdownload"</span>); <span class="comment">// 不同类型的文件对应不同的MIME类型 // 重点突出</span></span><br><span class="line">        <span class="comment">// 对文件名进行编码处理中文问题</span></span><br><span class="line">        zipFileName = <span class="keyword">new</span> String(zipFileName.getBytes(), StandardCharsets.UTF_8);</span><br><span class="line">        <span class="comment">// inline在浏览器中直接显示，不提示用户下载</span></span><br><span class="line">        <span class="comment">// attachment弹出对话框，提示用户进行下载保存本地</span></span><br><span class="line">        <span class="comment">// 默认为inline方式</span></span><br><span class="line">        response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;filename="</span> + zipFileName);</span><br><span class="line">        <span class="comment">//            response.setHeader("Content-Disposition", "attachment;filename=" + URLEncoder.encode(zipFileName, "UTF-8"));</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// --设置成这样可以不用保存在本地，再输出， 通过response流输出,直接输出到客户端浏览器中。</span></span><br><span class="line">        ZipOutputStream zos = <span class="keyword">new</span> ZipOutputStream(response.getOutputStream());</span><br><span class="line">        zipFile(isList, zos,fileNames);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span> alex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span> 14:42 2020/8/4</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Param</span> [filePaths, zos]</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">     **/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">zipFile</span><span class="params">(List&lt;InputStream&gt; isList, ZipOutputStream zos, String[] fileNames)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//设置读取数据缓存大小</span></span><br><span class="line">    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//循环读取文件路径集合，获取每一个文件的路径</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;fileNames.length;++i) &#123;</span><br><span class="line">            fileNames[i].replaceAll(<span class="string">","</span>,<span class="string">"_"</span>);</span><br><span class="line">            fileNames[i].replaceAll(<span class="string">"."</span>,<span class="string">"_"</span>);</span><br><span class="line">            <span class="comment">//将文件写入zip内，即将文件进行打包</span></span><br><span class="line">            zos.putNextEntry(<span class="keyword">new</span> ZipEntry(fileNames[i]));</span><br><span class="line">            <span class="comment">//写入文件的方法，同上</span></span><br><span class="line">            <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//设置读取数据缓存大小</span></span><br><span class="line">            <span class="keyword">while</span> ((size = isList.get(i).read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                zos.write(buffer, <span class="number">0</span>, size);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//关闭输入输出流</span></span><br><span class="line">            zos.closeEntry();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != zos) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                zos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2、上传"><a href="#2、上传" class="headerlink" title="2、上传"></a>2、上传</h2><p>xml配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    将客户端的File文件，处理为MultipartFile</span></span><br><span class="line"><span class="comment">    文件解析器的id必须设置为multipartResolver</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;property name="maxUploadSize" value="88888"&gt;&lt;/property&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="①、自己手写"><a href="#①、自己手写" class="headerlink" title="①、自己手写"></a>①、自己手写</h3><p>java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/up_old"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">up_old</span><span class="params">(String desc, MultipartFile uploadFile,HttpSession session)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取上传文件的名称</span></span><br><span class="line">    String fileName = uploadFile.getOriginalFilename();</span><br><span class="line">    <span class="comment">//获取服务器下项目的文件路径</span></span><br><span class="line">    String path = session.getServletContext().getRealPath(<span class="string">"photo"</span>)+File.separator+fileName;</span><br><span class="line">    File file = <span class="keyword">new</span> File(session.getServletContext().getRealPath(<span class="string">"photo"</span>));</span><br><span class="line">    <span class="keyword">if</span> (!file.exists())&#123;<span class="comment">//不存在就创建</span></span><br><span class="line">        file.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取输入流</span></span><br><span class="line">    InputStream is = uploadFile.getInputStream();</span><br><span class="line">    <span class="comment">//获取输出流</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(path);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</span><br><span class="line">    <span class="keyword">while</span> ((i = is.read(b))!=-<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//最后一次不一定有4096个字节</span></span><br><span class="line">        fos.write(b,<span class="number">0</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">    fos.close();</span><br><span class="line">    is.close();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"uploadSuccess"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/up"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">    头像：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"uploadFile"</span>/&gt;</span></span><br><span class="line">    描述：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"desc"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"上传"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="②、使用MultipartFile-transferTo-File-dest"><a href="#②、使用MultipartFile-transferTo-File-dest" class="headerlink" title="②、使用MultipartFile.transferTo(File dest)"></a>②、使用MultipartFile.transferTo(File dest)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/up"</span>,method = RequestMethod.POST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">up</span><span class="params">(String desc, MultipartFile uploadFile,HttpSession session)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//获取上传文件的名称</span></span><br><span class="line">    String fileName = uploadFile.getOriginalFilename();</span><br><span class="line">    String finalFileName = UUID.randomUUID()+fileName.substring(fileName.lastIndexOf(<span class="string">"."</span>));</span><br><span class="line">    <span class="comment">//获取服务器下项目的文件路径</span></span><br><span class="line">    String path = session.getServletContext().getRealPath(<span class="string">"photo"</span>)+File.separator+finalFileName;</span><br><span class="line">    File directory = <span class="keyword">new</span> File(session.getServletContext().getRealPath(<span class="string">"photo"</span>));</span><br><span class="line">    <span class="keyword">if</span> (!directory.exists())&#123;<span class="comment">//不存在就创建</span></span><br><span class="line">        directory.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    File file = <span class="keyword">new</span> File(path);</span><br><span class="line">    uploadFile.transferTo(file);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"uploadSuccess"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>多个文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MultipartFile[] uploadFile</span><br><span class="line"></span><br><span class="line">&lt;form action=&quot;/up&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">头像：&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt;</span><br><span class="line">头像2：&lt;input type=&quot;file&quot; name=&quot;uploadFile&quot;/&gt;</span><br><span class="line">描述：&lt;input type=&quot;text&quot; name=&quot;desc&quot;/&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;上传&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<h3 id="③、使用bootstrap-fileinput"><a href="#③、使用bootstrap-fileinput" class="headerlink" title="③、使用bootstrap-fileinput"></a>③、使用bootstrap-fileinput</h3><p>导入相关依赖</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为上传添加技能</span></span><br><span class="line">initFileInput(<span class="string">"fireName"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">initFileInput</span>(<span class="params">ctrlName</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> control = $(<span class="string">'#'</span> + ctrlName);</span><br><span class="line">	control.fileinput(&#123;</span><br><span class="line">		language: <span class="string">'zh'</span>, <span class="comment">// 设置语言</span></span><br><span class="line">		uploadUrl: <span class="string">"/file/upload"</span>, <span class="comment">// 上传的地址</span></span><br><span class="line">		allowedPreviewTypes:[<span class="string">'image'</span>],<span class="comment">// 配置所有的被预览文件类型</span></span><br><span class="line">		allowedFileExtensions: [<span class="string">'xls'</span>, <span class="string">'xlsx'</span>, <span class="string">'pdf'</span>,<span class="string">'doc'</span>,<span class="string">'docx'</span>,<span class="string">'jpg'</span>,<span class="string">'jpeg'</span>,<span class="string">'png'</span>],<span class="comment">// 接收的文件后缀</span></span><br><span class="line">		<span class="comment">// uploadExtraData:&#123;"id": 1, "fileName":'123.mp3'&#125;,</span></span><br><span class="line">		uploadAsync: <span class="literal">true</span>, <span class="comment">// 默认异步上传</span></span><br><span class="line">		showUpload: <span class="literal">true</span>, <span class="comment">// 是否显示上传按钮</span></span><br><span class="line">		showRemove : <span class="literal">false</span>, <span class="comment">// 显示移除按钮</span></span><br><span class="line">		showCaption:<span class="literal">true</span>, <span class="comment">// 是否显示标题</span></span><br><span class="line">		dropZoneEnabled:<span class="literal">true</span>,<span class="comment">// 是否显示拖拽区域</span></span><br><span class="line">		showPreview : <span class="literal">true</span>, <span class="comment">// 是否显示预览</span></span><br><span class="line">		showCaption: <span class="literal">false</span>,<span class="comment">// 是否显示标题</span></span><br><span class="line">		browseClass: <span class="string">"btn btn-primary"</span>, <span class="comment">// 按钮样式</span></span><br><span class="line">		maxFileSize:<span class="number">1024000</span>,<span class="comment">// 允许文件大小单位KB</span></span><br><span class="line"><span class="comment">// maxFileCount: 5, // 允许同时上传的最大文件个数</span></span><br><span class="line">		enctype: <span class="string">'multipart/form-data'</span>,</span><br><span class="line">		validateInitialCount:<span class="literal">true</span>,</span><br><span class="line"><span class="comment">// msgFilesTooMany: "选择上传的文件数量(&#123;n&#125;) 超过允许的最大数值&#123;m&#125;！"</span></span><br><span class="line">		uploadExtraData: <span class="function"><span class="keyword">function</span>(<span class="params">previewId, index</span>) </span>&#123;   <span class="comment">//额外参数的关键点</span></span><br><span class="line">			<span class="keyword">var</span> parameter = &#123;</span><br><span class="line">				<span class="string">"pageId"</span>:Id,</span><br><span class="line">			&#125;;</span><br><span class="line">			<span class="keyword">return</span> parameter;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;).on(<span class="string">'filepreupload'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event, data, previewId, index</span>) </span>&#123;     <span class="comment">// 上传中</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'文件正在上传'</span>);</span><br><span class="line">	&#125;).on(<span class="string">"fileuploaded"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, file, previewId, index</span>) </span>&#123;    <span class="comment">// 一个文件上传成功</span></span><br><span class="line">		<span class="comment">// file.response得到后台处理后的结果</span></span><br><span class="line">		<span class="comment">// file.filescount .得到文件个数</span></span><br><span class="line">		<span class="comment">// index，当前文件的下标</span></span><br><span class="line">	&#125;).on(<span class="string">'fileerror'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event, data, msg</span>) </span>&#123;  <span class="comment">// 一个文件上传失败</span></span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'文件上传失败！'</span>+data.status);</span><br><span class="line">		swal(<span class="string">"文件上传失败！"</span>,<span class="string">""</span>,<span class="string">"error"</span>);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后台</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 上传多个文件 这个其实一次只处理一个文件，但接收却是用MultipartFile[] file，匪夷所思</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Title</span>: upload</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="doctag">@param</span>  file</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="doctag">@param</span>  pageId</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="doctag">@throws</span> IOException 参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Map&lt;String, Object&gt; 返回类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> <span class="doctag">@author</span> 王迪</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020年3月10日</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/upload"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">upload</span><span class="params">(@RequestParam(<span class="string">"file"</span>)</span> MultipartFile[] file, String pageId) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="keyword">null</span> || file.length == <span class="number">0</span>) &#123;</span><br><span class="line">        result.put(<span class="string">"code"</span>, <span class="string">"nfile"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 存储所有map</span></span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; AllMap = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">module</span>.length; i++) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">            <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 存储一个模块上传成功的</span></span><br><span class="line">            StringBuffer success = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 存储一个模块上传失败的</span></span><br><span class="line">            StringBuffer fail = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">            <span class="comment">// 其实这个file数组的长度永远是1</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; file.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!file[j].isEmpty()) &#123;</span><br><span class="line">                    String originFileName = file[j].getOriginalFilename();<span class="comment">// 获取客户机上的文件名</span></span><br><span class="line">                    List&lt;UpFile&gt; queryFileByName = fileService.queryFileByName(originFileName, <span class="keyword">module</span>[i]);</span><br><span class="line">                    <span class="keyword">boolean</span> isDeleted = <span class="keyword">true</span>;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; queryFileByName.size(); k++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (queryFileByName.get(k).getSubjection() != <span class="string">"0"</span>) &#123;</span><br><span class="line">                            isDeleted = <span class="keyword">false</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (!isDeleted) &#123;<span class="comment">// isDeleted代表subjection为0,代表此文件是删除了，就增加该文件，否则加入fail信息中</span></span><br><span class="line">                        flag = <span class="number">0</span>;</span><br><span class="line">                        fail.append(originFileName + <span class="string">","</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        success.append(originFileName + <span class="string">","</span>);</span><br><span class="line">                        addFile(file[j], <span class="keyword">module</span>[i]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            String moduleName = FilePageService.queryFilePageBySubjection(<span class="keyword">module</span>[i]).getModuleName();</span><br><span class="line">            map.put(<span class="string">"moduleName"</span>, moduleName);</span><br><span class="line">            <span class="keyword">if</span> (flag == <span class="number">0</span>) &#123;</span><br><span class="line">                map.put(<span class="string">"code"</span>, <span class="string">"exist"</span>);</span><br><span class="line">                map.put(<span class="string">"info"</span>, fail.substring(<span class="number">0</span>, fail.length() - <span class="number">1</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put(<span class="string">"code"</span>, <span class="string">"NotExist"</span>);</span><br><span class="line">                map.put(<span class="string">"info"</span>, success.substring(<span class="number">0</span>, success.length() - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            AllMap.add(map);</span><br><span class="line">        &#125;</span><br><span class="line">        result.put(<span class="string">"info"</span>, AllMap);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        result.put(<span class="string">"code"</span>, <span class="string">"error"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="八、拦截器"><a href="#八、拦截器" class="headerlink" title="八、拦截器**"></a>八、拦截器**</h1><p><strong>当有多个拦截器时</strong><br>preHandle:按照拦截器数组顺序执行<br>postHandle:按照拦截器数组逆序执行<br>afterCompletion:按照拦截器数组逆序执行</p>
<p>当多个preHandle有不同的值时：<br>第一个返回false,第二个返回false,只有第一个的preHandle会执行<br>第一个返回false,第二个返回true,只有第一个的preHandle会执行<br>第一个返回true,第二个返回false,只有第一个的preHandle和afterCompletion以及第二个的preHandle会执行</p>
<p>执行顺序：<br>客户端请求—&gt;filter—&gt;DispatcherServlet—&gt;interceptor—&gt;服务器</p>
<h2 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecondInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Second:preHandle"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler,</span></span></span><br><span class="line"><span class="function"><span class="params">                           ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Second:postHandle..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Second:afterCompletion..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>xml配置,加入IOC容器中</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;bean class="com.springmvc.interceptor.FirstInterceptor"&gt;&lt;/bean&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.springmvc.interceptor.SecondInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"firstInterceptor"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        设置自定义拦截方式--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;mvc:interceptor&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--            &lt;mvc:mapping path=""/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--            &lt;mvc:exclude-mapping path=""/&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        &lt;/mvc:interceptor&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="九、整合Spring-SpringMVC"><a href="#九、整合Spring-SpringMVC" class="headerlink" title="九、整合Spring,SpringMVC**"></a>九、整合Spring,SpringMVC**</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.spring与springmvc的整合：spring的配置文件什么时候加载？什么时候加载？</span><br><span class="line">监听器，可以在ServletContext加载时，通过监听器加载spring的配置文件，创建spring容器</span><br><span class="line">Spring提供的监听器，ContextLoaderListener</span><br><span class="line"></span><br><span class="line">2.bean被创建两次的问题，在springmvc中只扫描控制层，在spring中值包含指定的包</span><br><span class="line"></span><br><span class="line">3.Spring和springMVC的关系；</span><br><span class="line">Spring是父容器</span><br><span class="line">springmvc是子容器</span><br><span class="line">规定：子容器能够调用访问父容器中的bean，而父容器不能够调用访问子容器中的bean</span><br></pre></td></tr></table></figure>
<p>web.xml添加监听器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    自动配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 第一个执行，因为listener需要  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>通过监听器加载spring的配置文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line">        ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"spring.xml"</span>);</span><br><span class="line">        ServletContext servletContext = servletContextEvent.getServletContext();</span><br><span class="line">        servletContext.setAttribute(<span class="string">"ac"</span>,ac);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认返回视图是@RequestMapping的值</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/testListener"</span>,method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListener</span><span class="params">(HttpSession session)</span></span>&#123;</span><br><span class="line">    ServletContext servletContext = session.getServletContext();</span><br><span class="line">    ApplicationContext ac = (ApplicationContext)servletContext.getAttribute(<span class="string">"ac"</span>);</span><br><span class="line">    Person person = (Person)ac.getBean(<span class="string">"person"</span>);</span><br><span class="line">    System.out.println(person);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="十、SpringMVC执行流程"><a href="#十、SpringMVC执行流程" class="headerlink" title="十、SpringMVC执行流程**"></a>十、SpringMVC执行流程**</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">springmvc利用DispatcherServlet进行处理客户端的请求，</span><br><span class="line">如果springmvc中有相应的请求，即springmvc能够处理这个请求</span><br><span class="line">    1.由HandlerMapping(存储的是所有的请求和处理器的关系)调用getHandler()</span><br><span class="line">    获取该Handler配置的所有相关的对象(包括Handler对象)以及Handler对象对应的拦截器</span><br><span class="line">    最后以HandlerExecutionChain(某个指定的处理器和请求的关系)对象的形式返回</span><br><span class="line">    2.DispatcherServlet根据获得的Handler对象选择合适的HandlerAdapter(对请求执行和操作)对象</span><br><span class="line">        通过调用getHandlerAdapter()获得</span><br><span class="line">    3.成功获得HandlerAdapter对象后，执行拦截器preHandle方法，</span><br><span class="line">    4.调用Handler的目标方法得到ModelAndView对象</span><br><span class="line">        如果存在异常，由HandlerExceptionResolver组件处理异常，得到新的ModelAndView对象</span><br><span class="line">        如果不存在异常，就执行拦截器的postHandle方法</span><br><span class="line">                     有ViewResolver组件根据ModelAndView对象得到实际的View</span><br><span class="line">                     渲染视图</span><br><span class="line">    5.执行拦截器的afterCompletion方法</span><br><span class="line">否则，查看xml配置文件中有没有&lt;mvc:default-servlet-handler/&gt;(用tomcat默认的servet处理)注解</span><br><span class="line">    如果配置了，且能处理，就成功</span><br><span class="line">              但不能处理，就到404页面,控制台没有报错</span><br><span class="line">    如果没配置，控制台:No mapping found for HTTP request with URI in DispatcherServlet</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/alex-next/tags/SpringMVC/" rel="tag"># SpringMVC</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/alex-next/2020/07/17/java后端/spring/" rel="next" title="spring笔记">
                  <i class="fa fa-chevron-left"></i> spring笔记
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/alex-next/2020/07/31/java后端/mybatis/" rel="prev" title="mybatis笔记">
                  mybatis笔记 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#一、SpringMVC入门"><span class="nav-number">1.</span> <span class="nav-text">一、SpringMVC入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、导入jar"><span class="nav-number">1.1.</span> <span class="nav-text">1、导入jar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、在web-xml中配置springMVC的核心控制器DispatcherServlet"><span class="nav-number">1.2.</span> <span class="nav-text">2、在web.xml中配置springMVC的核心控制器DispatcherServlet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、配置视图解析器-扫描"><span class="nav-number">1.3.</span> <span class="nav-text">3、配置视图解析器+扫描</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、RequestMapping"><span class="nav-number">2.</span> <span class="nav-text">二、RequestMapping</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、-RequestParam"><span class="nav-number">2.1.</span> <span class="nav-text">1、@RequestParam</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、-RequestHeader"><span class="nav-number">2.2.</span> <span class="nav-text">2、@RequestHeader</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、-PathVariable"><span class="nav-number">2.3.</span> <span class="nav-text">3、@PathVariable</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、RESTFUL风格"><span class="nav-number">3.</span> <span class="nav-text">三、RESTFUL风格</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#前台"><span class="nav-number">3.1.</span> <span class="nav-text">前台</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#后台"><span class="nav-number">3.2.</span> <span class="nav-text">后台</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#增删改查"><span class="nav-number">3.3.</span> <span class="nav-text">增删改查</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、往作用域中放值"><span class="nav-number">4.</span> <span class="nav-text">四、往作用域中放值</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、map"><span class="nav-number">4.1.</span> <span class="nav-text">1、map</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、Model"><span class="nav-number">4.2.</span> <span class="nav-text">2、Model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、ModelAndView"><span class="nav-number">4.3.</span> <span class="nav-text">3、ModelAndView</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、静态资源处理"><span class="nav-number">5.</span> <span class="nav-text">五、静态资源处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、设置编码过滤器"><span class="nav-number">6.</span> <span class="nav-text">六、设置编码过滤器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、上传与下载"><span class="nav-number">7.</span> <span class="nav-text">七、上传与下载</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、下载"><span class="nav-number">7.1.</span> <span class="nav-text">1、下载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#①、ResponseEntity-不常用"><span class="nav-number">7.1.1.</span> <span class="nav-text">①、ResponseEntity(不常用)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#②、IOUtils下载单个文件"><span class="nav-number">7.1.2.</span> <span class="nav-text">②、IOUtils下载单个文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#③、使用ZipOutputStream批量下载-zip"><span class="nav-number">7.1.3.</span> <span class="nav-text">③、使用ZipOutputStream批量下载(zip)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、上传"><span class="nav-number">7.2.</span> <span class="nav-text">2、上传</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#①、自己手写"><span class="nav-number">7.2.1.</span> <span class="nav-text">①、自己手写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#②、使用MultipartFile-transferTo-File-dest"><span class="nav-number">7.2.2.</span> <span class="nav-text">②、使用MultipartFile.transferTo(File dest)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#③、使用bootstrap-fileinput"><span class="nav-number">7.2.3.</span> <span class="nav-text">③、使用bootstrap-fileinput</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#案例"><span class="nav-number">7.2.3.1.</span> <span class="nav-text">案例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#八、拦截器"><span class="nav-number">8.</span> <span class="nav-text">八、拦截器**</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#案例-1"><span class="nav-number">8.1.</span> <span class="nav-text">案例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#九、整合Spring-SpringMVC"><span class="nav-number">9.</span> <span class="nav-text">九、整合Spring,SpringMVC**</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#十、SpringMVC执行流程"><span class="nav-number">10.</span> <span class="nav-text">十、SpringMVC执行流程**</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/alex-next/images/avatar.jpg"
      alt="alex">
  <p class="site-author-name" itemprop="name">alex</p>
  <div class="site-description" itemprop="description">时光静好,与君语;细水流年,与君同;繁华落尽,与君老.</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/alex-next/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/alex-next/categories/">
          
        
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/alex-next/tags/">
          
        
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="feed-link motion-element">
    <a href="/alex-next/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">alex</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/alex-next/lib/anime.min.js?v=3.1.0"></script>
  <script src="/alex-next/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/alex-next/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="/alex-next/lib/pjax/pjax.min.js?v=0.2.8"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
<script src="/alex-next/js/utils.js?v=7.4.0"></script><script src="/alex-next/js/motion.js?v=7.4.0"></script>
<script src="/alex-next/js/schemes/pisces.js?v=7.4.0"></script>
<script src="/alex-next/js/next-boot.js?v=7.4.0"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var id = element.id || '';
    var src = element.src || '';
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (id !=='') {
      script.id = element.id;
    }
    if (src !== '') {
      script.src = src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  








  <script src="/alex-next/js/local-search.js?v=7.4.0"></script>













    <div id="pjax">

  

  
    
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    
  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: '84888b5ba3be0f56b2ed',
      clientSecret: '1306406ecbdc02b679df3c95b94985753d302d6a',
      repo: 'alex-next',
      owner: 'alexander-wd',
      admin: ['alexander-wd'],
      id: '096d16f9a5e9ac37baf4341cfba87523',
        language: 'zh-CN',
      
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

    </div>
</body>
</html>
